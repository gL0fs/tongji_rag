# æŸ¥çœ‹ Milvus æ–‡æœ¬å†…å®¹å·¥å…·

## ğŸ“– ç®€ä»‹

`check_milvus_text.py` æ˜¯ä¸€ä¸ªç”¨äºç›´æ¥æŸ¥çœ‹ Milvus å‘é‡æ•°æ®åº“ä¸­å­˜å‚¨çš„æ–‡æœ¬å†…å®¹çš„å·¥å…·è„šæœ¬ã€‚å®ƒå¯ä»¥å®æ—¶æŸ¥è¯¢ Milvus ä¸­çš„æ•°æ®ï¼Œæ¯” Web UI æ›´åŠæ—¶ï¼Œæ–¹ä¾¿éªŒè¯çˆ¬å–æ•°æ®æ˜¯å¦æ­£ç¡®ã€‚

## ğŸ¯ åŠŸèƒ½

- âœ… æŸ¥çœ‹ Milvus é›†åˆä¸­çš„æ–‡æœ¬å†…å®¹
- âœ… æ˜¾ç¤ºé›†åˆç»Ÿè®¡ä¿¡æ¯ï¼ˆå®ä½“æ•°é‡ï¼‰
- âœ… æ”¯æŒæŒ‰æ¡ä»¶è¿‡æ»¤æŸ¥è¯¢
- âœ… æ”¯æŒæŒ‡å®šè¾“å‡ºå­—æ®µ
- âœ… æ”¯æŒæ˜¾ç¤ºå®Œæ•´æ–‡æœ¬æˆ–é¢„è§ˆï¼ˆå‰400å­—ç¬¦ï¼‰
- âœ… è‡ªåŠ¨æ£€æµ‹æ–‡æœ¬æ˜¯å¦åŒ…å«ä¸­æ–‡

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# åœ¨å®¹å™¨å†…æ‰§è¡Œ
python scripts/crawler/check_milvus_text.py
```

**é»˜è®¤è¡Œä¸º**ï¼š
- æŸ¥è¯¢ `rag_standard` é›†åˆ
- æ˜¾ç¤ºå‰ 10 æ¡è®°å½•
- æ˜¾ç¤º `text` å’Œ `source` å­—æ®µ
- åªæ˜¾ç¤ºæ–‡æœ¬å‰ 400 å­—ç¬¦

### æŸ¥çœ‹æŒ‡å®šé›†åˆ

```bash
python scripts/crawler/check_milvus_text.py --collection rag_faq
```

### æŸ¥çœ‹æ›´å¤šè®°å½•

```bash
python scripts/crawler/check_milvus_text.py --limit 20
```

### æŒ‰æ¥æºè¿‡æ»¤

```bash
python scripts/crawler/check_milvus_text.py --filter 'source == "åŒæµå¤§å­¦å®˜ç½‘"'
```

### æŒ‰IDæŸ¥è¯¢

```bash
python scripts/crawler/check_milvus_text.py --filter 'id == 123'
```

### æ˜¾ç¤ºå®Œæ•´æ–‡æœ¬

```bash
python scripts/crawler/check_milvus_text.py --full-text
```

### æŒ‡å®šè¾“å‡ºå­—æ®µ

```bash
python scripts/crawler/check_milvus_text.py --fields text source dept_id
```

## ğŸ“‹ å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|------|
| `--collection` | é›†åˆåç§° | `rag_standard` | `--collection rag_faq` |
| `--limit` | æ˜¾ç¤ºè®°å½•æ•°é‡ | `10` | `--limit 20` |
| `--filter` | è¿‡æ»¤è¡¨è¾¾å¼ | æ—  | `--filter 'source == "xxx"'` |
| `--fields` | è¾“å‡ºå­—æ®µåˆ—è¡¨ | `text, source` | `--fields text source dept_id` |
| `--full-text` | æ˜¾ç¤ºå®Œæ•´æ–‡æœ¬ | `False` | `--full-text` |

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### 1. éªŒè¯çˆ¬å–æ•°æ®æ˜¯å¦æ­£ç¡®

```bash
# æŸ¥çœ‹æœ€è¿‘çˆ¬å–çš„æ•°æ®
python scripts/crawler/check_milvus_text.py --collection rag_standard --limit 5
```

### 2. æ£€æŸ¥ç‰¹å®šæ¥æºçš„æ•°æ®

```bash
# æŸ¥çœ‹æ¥è‡ªç‰¹å®šURLçš„æ•°æ®
python scripts/crawler/check_milvus_text.py --filter 'source == "https://www.tongji.edu.cn/"'
```

### 3. æŸ¥çœ‹å®Œæ•´æ–‡æœ¬å†…å®¹

```bash
# æŸ¥çœ‹æŸæ¡è®°å½•çš„å®Œæ•´æ–‡æœ¬
python scripts/crawler/check_milvus_text.py --filter 'id == 123' --full-text
```

### 4. æ£€æŸ¥æ•°æ®è´¨é‡

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹æ–‡æœ¬æ˜¯å¦åŒ…å«ä¸­æ–‡ï¼Œå¦‚æœæ£€æµ‹åˆ°ä¸åŒ…å«ä¸­æ–‡ï¼Œä¼šæç¤º"å¯èƒ½æ˜¯ä¹±ç "ã€‚

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

```
================================================================================
ğŸ” æ£€æŸ¥ Milvus ä¸­çš„å®Œæ•´æ–‡æœ¬ï¼ˆé›†åˆ: rag_standardï¼‰
================================================================================
âœ… é›†åˆ rag_standard å­˜åœ¨
ğŸ“Š é›†åˆä¸­çš„å®ä½“æ•°é‡: 1234

ğŸ“„ æŸ¥è¯¢å‰ 10 æ¡è®°å½•...
âœ… æ‰¾åˆ° 10 æ¡è®°å½•

ã€è®°å½• 1ã€‘
  source: https://www.tongji.edu.cn/
  ID: 123456789
  æ–‡æœ¬é•¿åº¦: 456 å­—ç¬¦
  æ–‡æœ¬å†…å®¹ï¼ˆå‰400å­—ç¬¦ï¼‰:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  åŒæµå¤§å­¦æ˜¯ä¸€æ‰€ç»¼åˆæ€§å¤§å­¦ï¼Œä½äºä¸Šæµ·å¸‚...
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… åŒ…å«ä¸­æ–‡
  å‰500å­—ç¬¦ä¸­ä¸­æ–‡æ•°é‡: 89
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿ Milvus æœåŠ¡è¿è¡Œ**ï¼šè„šæœ¬éœ€è¦è¿æ¥åˆ° Milvus æœåŠ¡
2. **é›†åˆå¿…é¡»å­˜åœ¨**ï¼šå¦‚æœé›†åˆä¸å­˜åœ¨ï¼Œè„šæœ¬ä¼šæç¤ºé”™è¯¯
3. **è¿‡æ»¤è¡¨è¾¾å¼è¯­æ³•**ï¼šä½¿ç”¨ Milvus çš„è¿‡æ»¤è¡¨è¾¾å¼è¯­æ³•ï¼Œå¦‚ `'source == "xxx"'` æˆ– `'id == 123'`

## ğŸ”§ åœ¨ Docker ä¸­è¿è¡Œ

```bash
# æ–¹å¼ä¸€ï¼šåœ¨è¿è¡Œä¸­çš„å®¹å™¨ä¸­æ‰§è¡Œ
docker-compose exec rag-backend python scripts/crawler/check_milvus_text.py

# æ–¹å¼äºŒï¼šè¿›å…¥å®¹å™¨åæ‰§è¡Œ
docker exec -it rag-backend bash
python scripts/crawler/check_milvus_text.py
```

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `check_milvus_text.py` - è„šæœ¬æ–‡ä»¶
- `crawler.py` - çˆ¬è™«ä¸»è„šæœ¬
- `README.md` - çˆ¬è™«ä½¿ç”¨æŒ‡å—

